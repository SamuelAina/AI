<html><head>
<title id="titl">Offline ECL Adjustment Calculation Tracker - Add New Adjustment</title>
<link rel="StyleSheet" href="btnet.css" type="text/css">
<link rel="StyleSheet" href="jquery/jquery-ui-1.7.2.custom.css" type="text/css">
<!-- use btnet_edit_bug.css to control positioning on edit_bug.asp.  use btnet_search.css to control position on search.aspx  -->
<link rel="StyleSheet" href="custom/btnet_edit_bug.css" type="text/css">
<script type="text/javascript" language="JavaScript" src="jquery/jquery-1.3.2.min.js"></script>
<script type="text/javascript" language="JavaScript" src="jquery/jquery-ui-1.7.2.custom.min.js"></script>
<script type="text/javascript" language="JavaScript" src="jquery/jquery.textarearesizer.compressed.js"></script>
<script type="text/javascript" language="JavaScript" src="edit_bug.js"></script>

<script type="text/javascript">
var this_bugid = 0

$(document).ready(do_doc_ready);

function do_doc_ready()
{
	date_format = 'd M, yy'
	$(".date").datepicker({dateFormat: date_format, duration: 'fast'})
	$(".date").change(mark_dirty)
	$(".warn").click(warn_if_dirty) 
	$("textarea.resizable:not(.processed)").TextAreaResizer()
	
	$('textarea.resizable2:not(.processed)').TextAreaResizer()	
}

function disable_second_button()
{

	el = get_el("sub");
	el.disabled = true;
	
}

</script>

<script type="text/javascript">
    //Fix for cases when select fields appear squashed
    //Seen in the case of Org user type - Global Head PC
    $(".edit_bug_option").removeAttr("style");
</script>



    <style type="text/css">
        .auto-style1
        {
            width: 213px;
        }
    </style>

<!--colapsing tables -->
<style type="text/css">
#tbl1,#tbl2,#tbl3,#tbl4,#tbl5,#tbl6,#tbl7,#tbl8,#tbl9,#tbl10,#tbl11,#tbl12,#tbl13,#tbl14,#tbl15,#tbl16,#tbl17,#tbl18,#tbl19,#tbl20 {display:none;}
#lnk1,#lnk2,#lnk3,#lnk4,#lnk5,#lnk6,#lnk7,#lnk8,#lnk9,#lnk10,#lnk11,#lnk12,#lnk13,#lnk14,#lnk15,#lnk16,#lnk17,#lnk18,#lnk19,#lnk20 {border:none;background:none;width:20px;}
td {FONT-SIZE: 75%; MARGIN: 0px; COLOR: #000000;}
td {FONT-FAMILY: arial}
a {TEXT-DECORATION: none;}
    #bugform_div
    {
        width: 1021px;
    }
    p.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	font-size:10.0pt;
	font-family:"Arial","sans-serif";
	}
    .auto-style5
    {
        width: 911px;
    }
    .auto-style7
    {
        width: 606px;
    }
    .auto-style9
    {
        width: 872px;
    }
    .auto-style10
    {
        width: 872px;
        height: 17px;
    }
    .auto-style11
    {
        width: 110px;
    }
    .auto-style12
    {
        width: 205px;
    }
    .auto-style13
    {
        width: 341px;
        height:30px;
    }
    </style>
<!--colapsing tables -->


</head>

<body onload="on_body_load()" onunload="on_body_unload()">
<!-- Header - If you change this using admin, "Edit Custom HTML", changes take effect immediately, otherwise they don't take effect until you restart the IIS web application -->
<div id="scbbar">
    <div class="brand1"></div>
    <div class="brand2"></div>
    <div class="brand3"></div>
    <div class="brand4"></div>
    <div class="brand5"></div>
   </div>

<span id="debug" style="position:absolute;top:0;left:0;"></span>
<script>
function dbg(s)
{
	document.getElementById('debug').innerHTML += (s + '<br>')
}
function on_submit_search()
{
	el = document.getElementById('lucene_input')
	if (el.value == '')
	{
		alert('Enter the words you are search for.');
		el.focus()
		return false;
	}
	else
	{
		return true;
	}

}

</script>
<table border="0" width="100%" cellpadding="0" cellspacing="0" class="menubar"><tbody><tr><!-- start logo -->
<!-- If you change this using admin, "Edit Custom HTML", changes take effect immediately, otherwise they don't take effect until you restart the IIS web application -->
        <td width="86" valign="middle"><img width="86" src="custom/logo.jpg">
            <div nowrap="" class="logo" style="border:0px;margin:0px;padding:1px;font-size:6pt;font-weight:normal;">
                <b>ECL Adjustment Calculation Tracker</b>
            </div>
        </td><td>            
        </td><td>
            <b><font color="blue">(Production)</font></b>
        </td>
<!-- end logo -->
<td width="20">&nbsp;</td><td class="menu_td"><a href="deals.aspx"><span class="selected_menu_item warn" style="margin-left:3px;">Adjustments</span></a></td><td class="menu_td"><a href="search.aspx"><span class="menu_item warn" style="margin-left:3px;">search</span></a></td><td class="menu_td"><a href="queries.aspx"><span class="menu_item warn" style="margin-left:3px;">queries</span></a></td><td class="menu_td"><a href="reports.aspx"><span class="menu_item warn" style="margin-left:3px;">reports</span></a></td><td class="menu_td"><a href="admin.aspx"><span class="menu_item warn" style="margin-left:3px;">admin</span></a></td>
<td nowrap="" valign="middle">
    <form style="margin: 0px; padding: 0px;" action="edit_deal.aspx" method="get">
        <input class="menubtn" type="submit" value="go to ID">
        <input class="menuinput" size="4" type="text" name="id" accesskey="g">
    </form>
</td>

<td nowrap="" valign="middle">
    <form style="margin: 0px; padding: 0px;" action="search_text.aspx" method="get" onsubmit="return on_submit_search()">
        <input class="menubtn" type="submit" value="search text">
        <input class="menuinput" id="lucene_input" size="24" type="text" value="" name="query" accesskey="s">
        <a href="lucene_syntax.html" target="_blank" style="font-size: 7pt;">advanced</a>
    </form>
</td><td nowrap="" valign="middle"><span class="smallnote">logged in as<br>1303787 (Approver)</span></td><td class="menu_td"><a href="edit_self.aspx"><span class="menu_item warn" style="margin-left:3px;">settings</span></a></td><td valign="middle" align="left'"></td><td nowrap="" valign="middle"></td></tr></tbody></table><br>

<div class="align">

<span id="prev_next">&nbsp;</span>




<table border="0" cellspacing="0" cellpadding="3">
<tbody><tr><td colspan="3">	<div id="edit_bug_menu">
		<ul style="display: inline">
			<li id="clone" style="display: inline"></li>
			<li id="print" style="display: inline"></li>
			<!-- <li id="merge_bug" style="display: inline"></li> -->
			<li id="delete_bug" style="display: inline"></li>
			<!-- <li id="svn_revisions" style="display: inline"></li> -->
			<!-- <li id="git_commits" style="display: inline"></li> -->
			<!-- <li id="hg_revisions" style="display: inline"></li> -->
			<!-- <li id="subscribers" style="display: inline"></li> -->
			<!--  <li id="subscriptions" style="display: inline"></li>-->
			<!-- <li id="relationships" style="display: inline"></li> -->
			<!-- <li id="tasks" style="display: inline"></li> -->
			<li id="send_email" style="display: inline"></li>
			<li id="attachment" style="display: inline"></li> 
			<!-- <li id="custom" style="display: inline"></li> -->
		</ul>
	</div>

    
    </td></tr>
<tr>

<td nowrap="" valign="top"> <!-- links -->


</td><td nowrap="" valign="top" class="auto-style5"> <!-- form -->

<div id="bugform_div">
<form name="ctl00" method="post" action="./edit_deal.aspx" id="ctl00" class="frm">
<div>
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="">
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="">

</div>

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['ctl00'];
if (!theForm) {
    theForm = document.ctl00;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script>


<div>

	<input type="hidden" name="__VIEWSTATEGENERATOR" id="__VIEWSTATEGENERATOR" value="4300297F">

</div>
   
    <span id="Label1" style="display:inline-block;width:812px;"></span>
    <a id="LinkButtonRefresh" href="javascript:__doPostBack('LinkButtonRefresh','')">Refresh</a>
	
		<div>
				<span id="custom_field_msg2" class="err"></span>
				<span id="msg2" class="err"></span>
		</div>
		 <div style="text-align: center;"> 
			<input name="sub2" type="submit" id="sub2" class="btn" onclick="disable_me()" value="Create" style="display: none;">
		</div>			
				
	<table border="0" cellpadding="3" cellspacing="0">
	<tbody><tr>
  
		<td nowrap="" valign="top" class="auto-style13">
			<span id="bugid_label" class="lbl"></span>
            <span id="bugid" class="bugid" style="vertical-align:top"></span> 
       </td>
 
		<td valign="top">			

			


			
				&nbsp;&nbsp;&nbsp;
				<span id="short_desc_err" class="err"></span>
				
			<div class="smallnote" id="short_desc_cnt">&nbsp;</div>
    </td></tr>
	</tbody></table>			
	<table width="800px" border="0" cellpadding="3" cellspacing="0">
	<tbody><tr>
		<td nowrap="">
			<span id="reported_by"></span>
<!--
		

		<td nowrap align=right id="presets" >Presets:
			<a title="Use previously saved settings for project, category, priority, etc..."
				href="javascript:get_presets()">use</a>
			&nbsp;/&nbsp;
			<a title="Save current settings for project, category, priority, etc., so that you can reuse later."
				href="javascript:set_presets()">save</a>
		
        </td>
-->
        </td></tr>
	</tbody></table>
<table style="width: 798px">
	<tbody><tr id="tags_row">
		<td nowrap="nowrap" class="auto-style11">
			</td>
		
		<td nowrap="nowrap">
			
			
			</td></tr>

	<tr id="row1">
		<td nowrap="nowrap" class="auto-style11">
			</td>
		<td nowrap="nowrap" class="auto-style1" align="left">
			<span id="static_project" class="stat"></span>

			</td></tr>
<!---->

<!--
	<tr id="row2">
		<td nowrap>
			
		<td nowrap>
			<span id="static_org" class="stat"></span>
			

	<tr id="row3">
		<td nowrap>
			
		<td nowrap>
			<span id="static_category" class="stat"></span>
			

	<tr id="row4">
		<td nowrap>
			
		<td nowrap>
			<span id="static_priority" class="stat"></span>
			
-->
	<tr id="row5">
		<td nowrap="nowrap" class="auto-style11" style="width:315px">
			</td>
		<td nowrap="nowrap">
			<span id="static_status" class="stat"></span>
			</td></tr>

	<tr id="row6">
		<td nowrap="nowrap" class="auto-style11">
			</td>
		<td nowrap="nowrap">
			<span id="static_assigned_to" class="stat"></span>
			
			&nbsp;
			<span id="assigned_to_err" class="err"></span></td></tr>
</tbody></table>
	<table border="0" cellpadding="0" cellspacing="4" style="width: 867px">





<tbody><tr id="Requestcreator_row"><td nowrap=""><span id="Requestcreator_label"><table width="1000" border="0" align="left" cellpadding="0" cellspacing="0" style="table-layout:fixed">
  <tbody><tr height="1">
   <td bgcolor="#727272" colspan="100"></td>
  </tr>  
  <tr bgcolor="#EEEEEE" height="20">
   <td colspan="100"><input id="lnk1" type="button" value="[-]" onclick="toggle_visibility('tbl1', 'lnk1');"><strong>Header               </strong></td>   
  </tr>
  <tr>
   <td colspan="100" nowrap=""> 
    <table width="100%" border="0" cellpadding="4" cellspacing="0" id="tbl1" style="display: table;"><tbody><tr><td style="width:300px">Request creator:</td><td align="left"><span class="stat" id="Requestcreator_static"></span>
</td></tr><tr id="Title_row"><td nowrap=""><span id="Title_label">Title:</span></td><td align="left"><input type="text" onkeydown="mark_dirty()" onkeyup="mark_dirty()" size="120" maxlength="120" name="Title" id="Title" value="" class="txt">
</td></tr><tr id="AdjustmentCategory_row"><td nowrap=""><span id="AdjustmentCategory_label">Adjustment Category:</span></td><td align="left"><select id="AdjustmentCategory" name="Adjustment Category" class="edit_bug_option" style="width: 400px;"><option selected=""></option><option>Timing Issue</option><option>DQ Issue</option><option>Country Requirement</option><option>SAG/SAR</option><option>PMA</option><option>Business adjustment/Management Overlay</option></select>
</td></tr><tr id="AdjustmentType_row"><td nowrap=""><span id="AdjustmentType_label">Adjustment Type:</span></td><td align="left"><select id="AdjustmentType" name="Adjustment Type" class="edit_bug_option" style="width: 400px;"><option selected=""></option><option>Group and Country adjustment</option><option>Group only adjustment</option><option>Country only adjustment</option></select>
</td></tr><tr id="PreMFUECL_row"><td nowrap=""><span id="PreMFUECL_label">Pre MFU ECL:</span></td><td align="left"><input type="text" onkeydown="mark_dirty()" onkeyup="mark_dirty()" name="Pre MFU ECL" id="PreMFUECL" value="" class="txt">
</td></tr><tr id="ECLNetImpact_row"><td nowrap=""><span id="ECLNetImpact_label">ECL Net Impact:</span></td><td align="left"><span class="stat" id="ECLNetImpact_static"></span>
</td></tr><tr id="PostMFUECL_row"><td nowrap=""><span id="PostMFUECL_label">Post MFU ECL:</span></td><td align="left"><input type="text" onkeydown="mark_dirty()" onkeyup="mark_dirty()" name="Post MFU ECL" id="PostMFUECL" value="" class="txt">
</td></tr><tr id="Whyweareadjusting?_row"><td nowrap=""><span id="Whyweareadjusting?_label">Why we are adjusting?:</span></td><td align="left"><div class="resizable-textarea"><span><textarea class="txt resizable processed" onkeydown="return count_chars('Whyweareadjusting?',1000)" wrap="soft" onkeyup="return count_chars('Whyweareadjusting?',1000)" cols="120" rows="8" name="Why we are adjusting?" id="Whyweareadjusting?"></textarea><div class="grippie" style="margin-right: 63px;"></div></span></div><div class="smallnote" id="Whyweareadjusting?_cnt">&nbsp;</div>
</td></tr><tr id="Whatareweadjusting-Howdidwecalculate?_row"><td nowrap=""><span id="Whatareweadjusting-Howdidwecalculate?_label">What are we adjusting - How did we calculate?:</span></td><td align="left"><div class="resizable-textarea"><span><textarea class="txt resizable processed" onkeydown="return count_chars('Whatareweadjusting-Howdidwecalculate?',1000)" wrap="soft" onkeyup="return count_chars('Whatareweadjusting-Howdidwecalculate?',1000)" cols="120" rows="8" name="What are we adjusting - How did we calculate?" id="Whatareweadjusting-Howdidwecalculate?"></textarea><div class="grippie" style="margin-right: 63px;"></div></span></div><div class="smallnote" id="Whatareweadjusting-Howdidwecalculate?_cnt">&nbsp;</div>
</td></tr><tr id="WhatistheStrategicFix?_row"><td nowrap=""><span id="WhatistheStrategicFix?_label">What is the Strategic Fix?:</span></td><td align="left"><div class="resizable-textarea"><span><textarea class="txt resizable processed" onkeydown="return count_chars('WhatistheStrategicFix?',1000)" wrap="soft" onkeyup="return count_chars('WhatistheStrategicFix?',1000)" cols="120" rows="8" name="What is the Strategic Fix?" id="WhatistheStrategicFix?"></textarea><div class="grippie" style="margin-right: 63px;"></div></span></div><div class="smallnote" id="WhatistheStrategicFix?_cnt">&nbsp;</div>
</td></tr><tr id="Previoustickets(YesorNo)_row"><td nowrap=""><span id="Previoustickets(YesorNo)_label">Previous tickets (Yes or No):</span></td><td align="left"><select id="Previoustickets(YesorNo)" name="Previous tickets (Yes or No)" class="edit_bug_option" style="width: 400px;"><option selected=""></option><option>Yes</option><option>No</option></select>
</td></tr><tr id="PreviousmonthTicketnumber_row"><td nowrap=""><span id="PreviousmonthTicketnumber_label">Previous month Ticket number:</span></td><td align="left"><input type="text" onkeydown="mark_dirty()" onkeyup="mark_dirty()" size="40" maxlength="40" name="Previous month Ticket number" id="PreviousmonthTicketnumber" value="" class="txt" style="background-color: white;">
</td></tr><tr id="Frequency_row"><td nowrap=""><span id="Frequency_label">Frequency:</span></td><td align="left"><select id="Frequency" name="Frequency" class="edit_bug_option" style="width: 400px;"><option selected=""></option><option>Round 1</option><option>Round 2</option></select>
</td></tr><tr id="Period_row"><td nowrap=""><span id="Period_label">Period:</span></td><td align="left"><select id="Period" name="Period" class="edit_bug_option" style="width: 400px;"><option selected=""></option><option>Aug-2024</option></select>
</td></tr><tr id="Peerreviewer_row"><td nowrap=""><span id="Peerreviewer_label">Peer reviewer:</span></td><td align="left"><select id="Peerreviewer" name="Peer reviewer" class="edit_bug_option" style="width: 400px;"><option selected=""></option><option>M, Sanjay-1618157</option><option>Chinta, Aravind Kumar-1392799</option><option>Qureshi, Rabia-1574703</option><option>Ramillo, Aaron Ramos-1554487</option><option>Ng, Yi Wei-1645371</option><option>Chew, Kelvin Chuan Ming-1452637</option><option>Koteswara Rao, Vundavalli-1577599</option><option>Palanivalu, Krishnamoorthy-1319770</option><option>Harivanam, Ramsagar -1539874</option><option>Magkawas, Nestor-1117892</option><option>Wang, Olivia-2001032</option><option>Chandrasekkhar, N T P -2010551</option><option>Espinosa, Juan Pablo-2019622</option><option>P1, Jagadeesh-1614689</option></select>
</td></tr><tr id="Status._row"><td nowrap=""><span id="Status._label">Status.:</span></td><td align="left"><select id="Status." name="Status." class="edit_bug_option" style="width: 400px;"><option selected=""></option><option>In progress</option><option>Peer review pending</option><option>Approval pending</option><option>Approved</option></select>
</td></tr><tr id="PeerreviewerApproval_row"><td nowrap=""><span id="PeerreviewerApproval_label">Peer reviewer Approval:</span></td><td align="left"><select id="PeerreviewerApproval" name="Peer reviewer Approval" class="edit_bug_option" style="width: 400px;"><option selected=""></option><option>Pending</option><option>Approved</option><option>Rejected</option></select>
</td></tr><tr id="ReasonforPeerreviewApproval/Rejection/Pending_row"><td nowrap=""><span id="ReasonforPeerreviewApproval/Rejection/Pending_label">Reason for Peer review Approval/Rejection/Pending:</span></td><td align="left"><div class="resizable-textarea"><span><textarea class="txt resizable processed" onkeydown="return count_chars('ReasonforPeerreviewApproval/Rejection/Pending',1000)" wrap="soft" onkeyup="return count_chars('ReasonforPeerreviewApproval/Rejection/Pending',1000)" cols="120" rows="8" name="Reason for Peer review Approval/Rejection/Pending" id="ReasonforPeerreviewApproval/Rejection/Pending"></textarea><div class="grippie" style="margin-right: 63px;"></div></span></div><div class="smallnote" id="ReasonforPeerreviewApproval/Rejection/Pending_cnt">&nbsp;</div>
</td></tr><tr id="Approver_row"><td nowrap=""><span id="Approver_label">Approver:</span></td><td align="left"><select id="Approver" name="Approver" class="edit_bug_option" style="width: 400px;"><option selected=""></option><option>Chia, Bryan-1143771</option><option>Moses, Michael-1571231</option></select>
</td></tr><tr id="MFUECLAdjustmentApproval_row"><td nowrap=""><span id="MFUECLAdjustmentApproval_label">MFU ECL Adjustment Approval:</span></td><td align="left"><select id="MFUECLAdjustmentApproval" name="MFU ECL Adjustment Approval" class="edit_bug_option" style="width: 400px;"><option selected=""></option><option>Pending</option><option>Approved</option><option>Rejected</option></select>
</td></tr><tr id="ReasonforMFUApproval/Rejection/Pending_row"><td nowrap=""><span id="ReasonforMFUApproval/Rejection/Pending_label">Reason for MFU Approval/Rejection/Pending:</span></td><td align="left"><div class="resizable-textarea"><span><textarea class="txt resizable processed" onkeydown="return count_chars('ReasonforMFUApproval/Rejection/Pending',1000)" wrap="soft" onkeyup="return count_chars('ReasonforMFUApproval/Rejection/Pending',1000)" cols="120" rows="8" name="Reason for MFU Approval/Rejection/Pending" id="ReasonforMFUApproval/Rejection/Pending"></textarea><div class="grippie" style="margin-right: 63px;"></div></span></div><div class="smallnote" id="ReasonforMFUApproval/Rejection/Pending_cnt">&nbsp;</div></td></tr></tbody></table></td></tr></tbody></table>

	</span></td></tr></tbody></table>


	<table border="0" cellpadding="0" cellspacing="3" style="width: 87%">

    <!--
	<tr><td nowrap class="auto-style9">

		&nbsp;
		<span id="comment_label">Comment:</span>
		
		<span class="smallnote" style="margin-left: 170px">
		Entering "adjustmentid#999" in comment creates link to id 999		
		</span>
		<br>
		<textarea name="comment" id="comment" rows="5" cols="100" class="txt resizable2" onkeydown="mark_dirty()" onkeyup="mark_dirty()"></textarea>
    </td></tr>
    -->
	<tbody><tr><td nowrap="" class="auto-style9">
		
		</td></tr>


	<tr><td nowrap="" align="left" class="auto-style10">
		<span id="custom_field_msg" class="err"></span>
		<span id="custom_validation_err_msg" class="err">&nbsp;</span>
		<span id="msg" class="err"></span></td></tr>


	<tr><td nowrap="" align="center" colspan="2" class="auto-style9">
		<input name="sub" type="submit" id="sub" class="btn" onclick="disable_me()" value="Create"></td></tr>

	</tbody></table>

	<input name="new_id" type="hidden" id="new_id" value="0">
	<input name="prev_short_desc" type="hidden" id="prev_short_desc">
	
	
	<input name="prev_project_name" type="hidden" id="prev_project_name">
	
	<input name="prev_org_name" type="hidden" id="prev_org_name">
	
	
	
	<input name="prev_assigned_to_username" type="hidden" id="prev_assigned_to_username">
	
	<input name="prev_udf" type="hidden" id="prev_udf">
	<input name="prev_pcd1" type="hidden" id="prev_pcd1">
	<input name="prev_pcd2" type="hidden" id="prev_pcd2">
	<input name="prev_pcd3" type="hidden" id="prev_pcd3">
	<input name="snapshot_timestamp" type="hidden" id="snapshot_timestamp">
	<input name="clone_ignore_bugid" type="hidden" id="clone_ignore_bugid" value="0">

    
    <input name="usp_get_audit_comments" type="hidden" id="usp_get_audit_comments">

    <input name="usp_get_deault_expand" type="hidden" id="usp_get_deault_expand" value="tbl1,lnk1|tbl2,lnk2|tbl3,lnk3|tbl4,lnk4|tbl5,lnk5|tbl6,lnk6|tbl7,lnk7|tbl8,lnk8|tbl9,lnk9|tbl10,lnk10">
    <input name="usp_get_sections_list_no_spaces" type="hidden" id="usp_get_sections_list_no_spaces" value="The request for procedure '_settings_custom_sections' failed because '_settings_custom_sections' is a table object.">
    <input name="hdn_org_name" type="hidden" id="hdn_org_name" value="Approver">
    
    <input name="hdn_disable_fields_list" type="hidden" id="hdn_disable_fields_list">
    <input name="hdn_usp_get_commission_grid_json" type="hidden" id="hdn_usp_get_commission_grid_json" value="[{&quot;CreditGradeCG&quot;:&quot;10A&quot;,&quot;Commission&quot;:&quot;1.25&quot;},{&quot;CreditGradeCG&quot;:&quot;10B&quot;,&quot;Commission&quot;:&quot;1.25&quot;},{&quot;CreditGradeCG&quot;:&quot;11A&quot;,&quot;Commission&quot;:&quot;1.25&quot;},{&quot;CreditGradeCG&quot;:&quot;11B&quot;,&quot;Commission&quot;:&quot;1.25&quot;},{&quot;CreditGradeCG&quot;:&quot;11C&quot;,&quot;Commission&quot;:&quot;1.25&quot;},{&quot;CreditGradeCG&quot;:&quot;12A&quot;,&quot;Commission&quot;:&quot;1.25&quot;},{&quot;CreditGradeCG&quot;:&quot;12B&quot;,&quot;Commission&quot;:&quot;1.25&quot;},{&quot;CreditGradeCG&quot;:&quot;12C&quot;,&quot;Commission&quot;:&quot;1.25&quot;},{&quot;CreditGradeCG&quot;:&quot;13&quot;,&quot;Commission&quot;:&quot;4.00&quot;},{&quot;CreditGradeCG&quot;:&quot;14&quot;,&quot;Commission&quot;:&quot;4.00&quot;},{&quot;CreditGradeCG&quot;:&quot;1A&quot;,&quot;Commission&quot;:&quot;0.25&quot;},{&quot;CreditGradeCG&quot;:&quot;1B&quot;,&quot;Commission&quot;:&quot;0.25&quot;},{&quot;CreditGradeCG&quot;:&quot;2A&quot;,&quot;Commission&quot;:&quot;0.25&quot;},{&quot;CreditGradeCG&quot;:&quot;2B&quot;,&quot;Commission&quot;:&quot;0.25&quot;},{&quot;CreditGradeCG&quot;:&quot;3A&quot;,&quot;Commission&quot;:&quot;0.25&quot;},{&quot;CreditGradeCG&quot;:&quot;3B&quot;,&quot;Commission&quot;:&quot;0.25&quot;},{&quot;CreditGradeCG&quot;:&quot;4A&quot;,&quot;Commission&quot;:&quot;0.25&quot;},{&quot;CreditGradeCG&quot;:&quot;4B&quot;,&quot;Commission&quot;:&quot;0.25&quot;},{&quot;CreditGradeCG&quot;:&quot;5A&quot;,&quot;Commission&quot;:&quot;0.25&quot;},{&quot;CreditGradeCG&quot;:&quot;5B&quot;,&quot;Commission&quot;:&quot;0.75&quot;},{&quot;CreditGradeCG&quot;:&quot;6A&quot;,&quot;Commission&quot;:&quot;0.75&quot;},{&quot;CreditGradeCG&quot;:&quot;6B&quot;,&quot;Commission&quot;:&quot;0.75&quot;},{&quot;CreditGradeCG&quot;:&quot;7A&quot;,&quot;Commission&quot;:&quot;0.75&quot;},{&quot;CreditGradeCG&quot;:&quot;7B&quot;,&quot;Commission&quot;:&quot;0.75&quot;},{&quot;CreditGradeCG&quot;:&quot;8A&quot;,&quot;Commission&quot;:&quot;0.75&quot;},{&quot;CreditGradeCG&quot;:&quot;8B&quot;,&quot;Commission&quot;:&quot;0.75&quot;},{&quot;CreditGradeCG&quot;:&quot;9A&quot;,&quot;Commission&quot;:&quot;1.25&quot;},{&quot;CreditGradeCG&quot;:&quot;9B&quot;,&quot;Commission&quot;:&quot;1.25&quot;}]">

    <input name="hdn_userID" type="hidden" id="hdn_userID" value="109">
    
<input type="hidden" name="prev_Adjustment Category" value="">
<input type="hidden" name="prev_Adjustment Type" value="">
<input type="hidden" name="prev_Approver" value="">
<input type="hidden" name="prev_ECL Net Impact" value="">
<input type="hidden" name="prev_Frequency" value="">
<input type="hidden" name="prev_MFU ECL Adjustment Approval" value="">
<input type="hidden" name="prev_Peer reviewer" value="">
<input type="hidden" name="prev_Peer reviewer Approval" value="">
<input type="hidden" name="prev_Period" value="">
<input type="hidden" name="prev_Post MFU ECL" value="">
<input type="hidden" name="prev_Pre MFU ECL" value="">
<input type="hidden" name="prev_Previous month Ticket number" value="">
<input type="hidden" name="prev_Previous tickets (Yes or No)" value="">
<input type="hidden" name="prev_Reason for MFU Approval/Rejection/Pending" value="">
<input type="hidden" name="prev_Reason for Peer review Approval/Rejection/Pending" value="">
<input type="hidden" name="prev_Request creator" value="">
<input type="hidden" name="prev_Status." value="">
<input type="hidden" name="prev_Title" value="">
<input type="hidden" name="prev_What are we adjusting - How did we calculate?" value="">
<input type="hidden" name="prev_What is the Strategic Fix?" value="">
<input type="hidden" name="prev_Why we are adjusting?" value="">
</form>
</div> <!-- bug form div -->
</td></tr></tbody></table>


<span id="toggle_images"></span>
&nbsp;&nbsp;&nbsp;&nbsp;
<span id="toggle_history"></span>


<div id="posts">

	


</div>

</div>
<!-- Footer - If you change this using admin, "Edit Custom HTML", changes take effect immediately, otherwise they don't take effect until you restart the IIS web application -->
<table width="100%" border="0" cellspacing="0" cellpadding="0" id="footer" style="margin:0; padding:0; vertical-align: top;">
  <tbody><tr>
   <td width="100%" class="footer-bg">Offline ECL Adjustment Calculation Tracker - 2023 Standard Chartered Bank </td>
  </tr>
 </tbody></table>
    <div style="height:5px; clear:both;"></div>


<script type="text/javascript">
    /*Force all textareas to retain breaks when data is submited to the database*/
    $("textarea").attr("wrap", "soft");
</script>

<script type="text/javascript">
    /* 
    //This section of code was supposed to lock/disable some comment boxes until associated combos have been changed
    //Some setback has been encountered, so it is WIP

    $(document).ready(
        function(){
            //Set it up so that the Approval comment boxes are locked until the user has selected from the approval dropdown
            ApprovalCommentsLockedUntilCombosSelected("PC Approval - Product PC Head (< $1m)", "PC Approval Comments - Product PC Head")
            ApprovalCommentsLockedUntilCombosSelected("PC Approval - PC Head CF (>= $1m)", "PC Approval Comments - Head CF")
            ApprovalCommentsLockedUntilCombosSelected("PC Approval - CFO CF (>= $2m)", "PC Approval Comments - CFO CF")
            ApprovalCommentsLockedUntilCombosSelected("PC Approval - Global Head PC (>= $5m)", "PC Approval Comments - Global Head PC")
            ApprovalCommentsLockedUntilCombosSelected("PC Approval - CFO CIB and Client Businesses (>= $10m)", "PC Approval Comments - CFO CIB")
        }
    )

    function ApprovalCommentsLockedUntilCombosSelected(approval_field_name, comment_field_name) {
        var txe = document.getElementById(comment_field_name.replace(/\s/g, ''));
        txe.setAttribute("disabled", "disabled");

        var cbo = document.getElementById(approval_field_name.replace(/\s/g, ''));
        cbo.setAttribute("PCcustom", txe.id)

        //The problem we're having with this that when the page completes loading, this event 
        //ceases to function...
        cbo.onchange = function () {
            document.getElementById(cbo.getAttribute("PCcustom")).removeAttribute("disabled");
        }
    }
*/
</script>


<script type="text/javascript">
    function toggle_visibility(tbid, lnkid) {
        if (document.getElementById(tbid) != null) {
            if (document.all) { document.getElementById(tbid).style.display = document.getElementById(tbid).style.display == "block" ? "none" : "block"; }
            else { document.getElementById(tbid).style.display = document.getElementById(tbid).style.display == "table" ? "none" : "table"; }
            document.getElementById(lnkid).value = document.getElementById(lnkid).value == "[-]" ? "[+]" : "[-]";
        }
		//Adjust the height of static textareas
		var tah = document.getElementsByClassName("textarea_auto_hieght");
		for (var i = 0; i < tah.length; i++) {
		  tah[i].style.height=tah[i].scrollHeight
		}
		
    }

    //we used to use usp_generate_default_expand to generate this now its automated. Yay!!!
    usp_get_deault_expand = document.getElementById("usp_get_deault_expand").value;
    //if (usp_get_deault_expand != "") { 
    for (var i = 0; i < (usp_get_deault_expand.split('|').length) ; i++) {
        tbl = usp_get_deault_expand.split('|')[i].split(',')[0];
        lnk = usp_get_deault_expand.split('|')[i].split(',')[1];
        toggle_visibility(tbl, lnk);
        //  }
    }
</script>

<script type="text/javascript">
    /*
    //Find approval fields and insert a comment in from to them
    usp_get_audit_comments = document.getElementById("usp_get_audit_comments").value;
    for (var i = 0; i < (usp_get_audit_comments.split('~').length) ; i++) {
        fld = usp_get_audit_comments.split('~')[i].split('|')[0] + "_row";
        cmt = usp_get_audit_comments.split('~')[i].split('|')[1];        
        $("[tr[id=" + fld + "]").find('td:eq(1)').append("<font size='1' color='red'>" + cmt + "</font>");
    }
	*/
	//Cnaged - SAM - 27NOV2017 in respomse to comments bug
	/*
    //Find approval fields and insert a comment in from to them
    usp_get_audit_comments = document.getElementById("usp_get_audit_comments").value;
    for (var i = 0; i < (usp_get_audit_comments.split('~').length) ; i++) {
        fld = usp_get_audit_comments.split('~')[i].split('|')[0];
        cmt = usp_get_audit_comments.split('~')[i].split('|')[1];        
        //$("[tr[id=" + fld + "]").find('td:eq(1)').append("<font size='1' color='red'>" + cmt + "</font>");

        if (fld != "") {
		  if ($gid(fld).val() !="") {
            $("<font size='1' color='red'>" + cmt + "</font>").insertAfter($gid(fld));
        }
		}
    }
    */
    /* 	
    //SAM - thanks to stack overflow
    //https://stackoverflow.com/questions/30749707/override-jquery-selector-to-support-dollar-sign-in-element-id
    //Function that returns jquery object whose id contains characters like $,( etc
    function $gid(id) {
        var e = document.getElementById(id);
        if (!e) {
            return $();
        }
        if (e.id === id) {
            return $(e);
        }
        // Fallback processing for old IE that matches name attributes
        return $('[id="' + id.replace(/"/g, '\\"') + '"]').filter(function () {
            return this.id === id;
        }).first();
    }
    */
	
	//Amended to capture static fields, also simplified the routine - SAM 07DEC2017
    //Find approval fields and insert a comment in from to them
    usp_get_audit_comments = document.getElementById("usp_get_audit_comments").value;
    for (var i = 0; i < (usp_get_audit_comments.split('~').length) ; i++) {
        fld = usp_get_audit_comments.split('~')[i].split('|')[0];
        cmt = usp_get_audit_comments.split('~')[i].split('|')[1];        

        if (fld != "") {

            fld = fld.replace(",", "\\,");
            fld = fld.replace("$", "\\$");
            fld = fld.replace("(", "\\(");
            fld = fld.replace(")", "\\)");
            fld = fld.replace("<", "\\<");
            fld = fld.replace(">", "\\>");
            fld = fld.replace(".", "\\.");
            fld = fld.replace("=", "\\=");

            fld = '#' + fld;
            console.log(fld);
            if ($(fld).length != 0) {
                $("<font size='1' color='red'>" + cmt + "</font>").insertAfter(fld);
            }
            if ($(fld+'_static').length != 0) {
                $("<font size='1' color='red'>" + cmt + "</font>").insertAfter(fld + '_static');
            }
        }
    }	
</script>

<script type="text/javascript">
    //Find all tds with id=section_DealInformation and move then to table with id section_container_DealInformation
         //$("#posts_table").find("tr[id=section_DealInformation]").each(function (index) {
         //    $("#section_container_DealInformation").append(this)
    //});   
    
    usp_get_sections_list_no_spaces = document.getElementById("usp_get_sections_list_no_spaces").value;
    for (var i = 0; i < (usp_get_sections_list_no_spaces.split('|').length) ; i++) {
        section = "";

        section = usp_get_sections_list_no_spaces.split('|')[i].split('|')[0]

        section_qry = "tr[id=section_" + section + "]";
        section_container_qry = "#section_container_" + section;

        $("#posts_table").find(section_qry).each(function (index) {
            $(this).appendTo($(section_container_qry))
        });
    }
</script>



<script type="text/javascript">
    //overide on the posts show/hide toggle
    //This doesnt work yet!!!
    $("#hideshow_history").click(function () {
        if (this.innerText == "show change history") {
            $("#posts").hide();
           // console.log("should be hidden");
        } else {
            $("#posts").show();
           // console.log("should be shown");
        }
    });
</script>

<script type="text/javascript">
    //Disable some specified fields
    var disable_fields =document.getElementById("hdn_disable_fields_list").value.split("|");

    for (i = 0; i < disable_fields.length; i++) {
        var field_name = disable_fields[i];
        var txe = document.getElementById(field_name.replace(/\s/g, ''));
        if (txe != null) {
            txe.setAttribute("disabled", "disabled");
            txe.setAttribute("style", "background-color: lightgray")


            //If it is a date field, we also need to find the [select] anchor and disable that as well
            if (txe.getAttribute("class") == "txt date") {
                
                var txd = txe.parentElement.getElementsByTagName("a")[0];
                console.log(txd);
                if (txd != null) {
                    txd.setAttribute("href", "javascript:void(0);");
                    txd.setAttribute("style", "color:gray;");
                }
            }
        }
    }
</script>

<script type="text/javascript">
    //Executive Summary should remain open at all times for Org “PC Line Controller” only 
    //i.e. disable the radio button “+” for this field only for PC Line Controller Org
    myOrg = "Approver";
    if (myOrg == "PC Line Controller") {
        if ($("#lnk2").val()=="[+]") { 
        toggle_visibility('tbl2', 'lnk2');
        }
        $("#lnk2").attr("disabled", true);
    }    
</script>


<script type="text/javascript">
    //Fix for cases when select fields appear squashed
    //Seen in the case of Org user type - Global Head PC
    $(".edit_bug_option").css("width", "400px");

    //Lazy approach as all else seems not to be working
    //Just cant get the damn thing to wait for all the elemts to load before firing  
    setTimeout(function () { $(".edit_bug_option").css("width", "400px"); }, 3000);
</script>

<script type="text/jscript">
 
    document.getElementsByName("Transaction Type")[0].addEventListener("change", amountsChanges);
    //document.getElementsByName("Transfer Fee Amount")[0].addEventListener("change", amountsChanges);
    document.getElementsByName("Notional (LCCY)")[0].addEventListener("change", amountsChanges);
    document.getElementsByName("Price (%)")[0].addEventListener("change", amountsChanges);
    document.getElementsByName("Credit Grade (CG)")[0].addEventListener("change", amountsChanges);
    document.getElementsByName("Commission Scheme")[0].addEventListener("change", amountsChanges);
    document.getElementsByName("Commission Non-Standard (%)")[0].addEventListener("change", amountsChanges);
    document.getElementsByName("Distribution Type")[0].addEventListener("change", amountsChanges);

    function amountsChanges() {
        transactionType    = $("select[name='Transaction Type']").find(" option:selected").text();
        CommissionScheme   = $("select[name='Commission Scheme']").find(" option:selected").text();
        //TransferFee        = $("input[name='Transfer Fee Amount']").val();
        NotionalLCCY       = $("input[name='Notional (LCCY)']").val();
        Price              = $("input[name='Price (%)']").val();
        CreditGradeCG      = $("select[name='Credit Grade (CG)']").find(" option:selected").text();
        CommissionNonStd   = $("input[name='Commission Non-Standard (%)']").val();
        DistributionType = $("select[name='Distribution Type']").find(" option:selected").text();
        paramswithvals = {
                transaction_type:  transactionType
               ,Commission_Scheme: CommissionScheme
               ,Notional_LCCY: ((NotionalLCCY == "") ? '0.0' : NotionalLCCY)
               ,Price_pcnt: ((Price == "") ? '0.0' : Price)
               ,Credit_Grade: CreditGradeCG     
               ,Commission_Non_Standard_pcnt: ((CommissionNonStd == "") ? '0.0' : CommissionNonStd)
               ,Distribution_Type: DistributionType
        };
        CommissionLCCY = IB_runProc_with_paramvals2("usp_Calculate_Commission_LCCY", paramswithvals);
        console.log(CommissionLCCY);

        if (CommissionLCCY[0].Commission_LCCY == null) {
            $("#CommissionLCCY").val(0.00);
            document.getElementById("CommissionLCCY").setAttribute("value",0.00)
            $("#CommissionLCCY").attr("disabled", false);
        } else {
            $("#CommissionLCCY").attr("disabled", true);
        }
    }


    //Apply calc as page loads   
    //setTimeout(function () {
    //    amountsChanges();
    //}, 1000);
    
    function highlightLabel(labeltext) {
        $($("td:contains('" + labeltext + "')")[3]).css("background-color", "#F0F0F0");
    }

    setTimeout(function () {
        highlightLabel("Transaction Type:");
        highlightLabel("Notional (LCCY):");
        highlightLabel("Price (%):");
        highlightLabel("Credit Grade (CG):");
        highlightLabel("Commission Scheme:");
        highlightLabel("Commission Non-Standard (%):");
        highlightLabel("Distribution Type:");
        highlightLabel("Commission LCCY:");
    }, 1000);
</script>


<script type="text/javascript" src="pcwebapp/js/pcwebapp.js"></script>
<script type="text/jscript">
    //attach events to the sections
    $("input[onclick*='toggle_visibility']").each(function (index, item) {
        item.addEventListener("click", setSectionStates);
    });

    var us_id = $("#hdn_userID").val();
    //as page loads, apply the state in hdn_sectionstate
    /*
    sectionstate0 = IB_runProc_with_paramvals2("usp_get_usersectionstate", { us_id: us_id });
    if (sectionstate0[0].sectionstate != "") {
        sectionstate0 = JSON.parse(sectionstate0[0].sectionstate.replaceAll("\\\"", "\""));
        sectionstate0.forEach(function (item, index) {
            if (item.value == "[-]") {
                $("input[id=" + item.id + "]")[0].click();
            }
        });
    }
    */
    function setSectionStates() {
        var sectionstate = [];
        $("input[onclick*='toggle_visibility']").each(function (index, item) { sectionstate.push({ id: item.id, value: item.value }) });
        r = IB_runProc_with_paramvals2("usp_set_usersectionstate", { us_id: us_id, sectionstate: JSON.stringify(sectionstate).replace(/\"/g, "\\\"") })
    }


    //Section sublabels
    function addSubsectionTitleAboveLabel(lblname, titleTxt) {
        $("<tr><td><span style='color:green;text-decoration: underline;font-weight: bold;'>" + titleTxt + "</span></td><td>.</td></tr>").insertBefore($($("[name='" + lblname + "']")[0]).parent().parent());
    }

    setTimeout(function () {
        addSubsectionTitleAboveLabel("Assigned to (for Business Approval)", "Business Approval");
        addSubsectionTitleAboveLabel("Settlement Status", "Loan Settlements");
        addSubsectionTitleAboveLabel("CPM Review", "CPM");
        addSubsectionTitleAboveLabel("Recognition Month", "Admin");
    }, 1000);
	

</script>
<script>$("#sub2").hide()</script>

<script>
bg_id=$("#bugid")[0].innerText;
actual_ticket_creator=IB_runProc_with_paramvals2("usp_get_actual_ticket_creator", { bg_id: bg_id} )[0].ActualTicketCreator
$("#reported_by > a")[0].setAttribute("href","")
$("#reported_by > a")[0].setAttribute("onclick","return false;")
$("#reported_by > a")[0].innerText=actual_ticket_creator
</script>

<script>
    previoustickets_sel = document.getElementById('Previoustickets(YesorNo)')

    function PreviousmonthTicketnumberReadWrite() {
        if (previoustickets_sel.value.toUpperCase() == "NO") {
            document.getElementById('PreviousmonthTicketnumber').style.backgroundColor = 'lightgray';
            document.getElementById('PreviousmonthTicketnumber').readOnly = true;
        } else {
            document.getElementById('PreviousmonthTicketnumber').style.backgroundColor = 'white';
            document.getElementById('PreviousmonthTicketnumber').readOnly = false;
        }
    }


    PreviousmonthTicketnumberReadWrite();

    previoustickets_sel.addEventListener("change", function () {
        PreviousmonthTicketnumberReadWrite();
    });
</script>

<div id="ui-datepicker-div" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible"></div></body></html>